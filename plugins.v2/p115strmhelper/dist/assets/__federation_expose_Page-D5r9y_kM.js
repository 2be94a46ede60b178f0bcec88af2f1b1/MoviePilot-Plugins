import{importShared as e}from"./__federation_fn_import-B6DyUTOO.js";import{_ as l}from"./_plugin-vue_export-helper-BCo6x5W8.js";const{resolveComponent:a,createVNode:t,createElementVNode:i,withCtx:s,toDisplayString:n,createTextVNode:o,openBlock:r,createBlock:c,createCommentVNode:d,createElementBlock:m,renderList:u,Fragment:p,normalizeClass:f,withKeys:_}=await e("vue"),g={class:"plugin-page"},y={key:3,class:"my-1"},h={key:1},b={class:"path-mapping-item pa-2 border rounded-sm",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.02)"}},x=["title"],v={class:"text-caption",style:{"line-height":"1.2"}},k=["title"],C={class:"text-caption",style:{"line-height":"1.2"}},w={key:1,class:"text-caption text-error mt-1"},P={class:"path-mapping-item pa-2 border rounded-sm",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.02)"}},z=["title"],V={class:"text-caption",style:{"line-height":"1.2"}},$=["title"],E={class:"text-caption",style:{"line-height":"1.2"}},L={key:1,class:"text-caption text-error mt-1"},T={class:"path-mapping-item pa-2 border rounded-sm",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.02)"}},U=["title"],I={class:"text-caption",style:{"line-height":"1.2"}},M=["title"],j={class:"text-caption",style:{"line-height":"1.2"}},B={key:1,class:"text-caption text-error mt-1"},S={class:"path-mapping-item pa-2 border rounded-sm",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.02)"}},O=["title"],H={class:"text-caption",style:{"line-height":"1.2"}},N=["title"],A={class:"text-caption",style:{"line-height":"1.2"}},R={key:1,class:"text-caption text-error mt-1"},W={class:"path-item pa-2 border rounded-sm",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.02)"}},F={class:"d-flex align-center"},K=["title"],q={class:"text-caption",style:{"line-height":"1.2"}},D={key:1,class:"text-caption text-error mt-1"},G={class:"path-group-item pa-2 border rounded-sm",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.02)"}},Z=["title"],J={class:"text-caption",style:{"line-height":"1.2"}},Q=["title"],X={class:"text-caption",style:{"line-height":"1.2"}},Y={key:0,class:"mt-1 pt-1",style:{"border-top":"1px dashed rgba(var(--v-border-color), 0.2)"}},ee={key:0,class:"d-flex align-center"},le=["title"],ae={class:"text-caption",style:{"line-height":"1.2"}},te={key:1,class:"text-caption text-error mt-1"},ie={class:"d-flex"},se={class:"text-body-2"},ne={class:"d-flex"},oe={class:"text-body-2"},re={class:"d-flex align-center"},ce={class:"d-flex align-center"},de={class:"text-no-wrap text-caption font-weight-medium",style:{"min-width":"40px","text-align":"right"}},me={class:"pa-3"},ue={class:"d-flex justify-end mt-3"},pe={key:0,class:"d-flex justify-center my-3"},fe={key:1},{ref:_e,reactive:ge,computed:ye,onMounted:he,watch:be}=await e("vue"),xe=l({__name:"Page",props:{api:{type:[Object,Function],required:!0},initialConfig:{type:Object,default:()=>({})}},emits:["close","switch","update:config","action"],setup(e,{emit:l}){const xe=e,ve=l,ke=_e(!0),Ce=_e(!1),we=_e(!1),Pe=_e(!1),ze=_e(!1),Ve=_e(null),$e=_e(null),Ee=_e("info"),Le=_e(!1),Te=ge({enabled:!1,has_client:!1,running:!1}),Ue=ge({name:null,is_vip:null,is_forever_vip:null,vip_expire_date:null,avatar:null,error:null,loading:!0}),Ie=ge({total:null,used:null,remaining:null,error:null,loading:!0}),Me=ge({show:!1,activeTab:"tasks",loading:!1,adding:!1,error:null,addError:null,tasks:[],totalTasks:0,itemsPerPage:10,headers:[{title:"文件名",key:"name",align:"start",sortable:!1},{title:"大小",key:"size_text",align:"end",sortable:!1,cellProps:{class:"text-no-wrap"},minWidth:"110px"},{title:"状态",key:"status_text",align:"center",sortable:!1},{title:"进度",key:"progress",align:"start",sortable:!1,minWidth:"160px"}],links:"",destPath:""}),je=(e,l)=>{if(!e||!l)return 0;const a=e=>{if(!e||"string"!=typeof e)return 0;const l=parseFloat(e);return isNaN(l)?0:e.toUpperCase().includes("TB")?1024*l*1024:e.toUpperCase().includes("GB")?1024*l:(e.toUpperCase().includes("MB"),l)},t=a(e),i=a(l);return 0===i?0:Math.min(Math.max(t/i*100,0),100)},Be=ye(()=>{if(!xe.initialConfig)return!1;if(!(xe.initialConfig.enabled&&xe.initialConfig.cookies&&xe.initialConfig.moviepilot_address))return!1;const e=Se(xe.initialConfig.transfer_monitor_paths)>0&&xe.initialConfig.transfer_monitor_enabled,l=Se(xe.initialConfig.full_sync_strm_paths)>0&&xe.initialConfig.timing_full_sync_strm,a=Se(xe.initialConfig.increment_sync_strm_paths)>0&&xe.initialConfig.increment_sync_strm_enabled,t=Se(xe.initialConfig.monitor_life_paths)>0&&xe.initialConfig.monitor_life_enabled,i=xe.initialConfig.user_share_local_path&&xe.initialConfig.user_share_pan_path;return e||l||a||t||i}),Se=e=>{if(!e)return 0;try{return e.split("\n").filter(e=>e.trim()&&e.includes("#")).length}catch(l){return console.error("解析路径字符串失败:",l),0}},Oe=e=>{if(!e)return 0;try{return e.split("\n").filter(e=>e.trim()).length}catch(l){return console.error("解析网盘整理路径字符串失败:",l),0}},He=async()=>{ke.value=!0,Ve.value=null;try{const l="P115StrmHelper",a=await xe.api.get(`plugin/${l}/get_status`);if(!a||0!==a.code||!a.data){if(xe.initialConfig){if(Te.enabled=Boolean(xe.initialConfig.enabled),Te.has_client=Boolean(xe.initialConfig.cookies&&""!==xe.initialConfig.cookies.trim()),Te.running=!1,ze.value=!0,Object.keys(xe.initialConfig).length<=1)try{const e=await xe.api.get(`plugin/${l}/get_config`);e&&(Object.assign(xe.initialConfig,e),console.log("从配置API获取配置:",xe.initialConfig))}catch(e){console.error("获取配置失败:",e)}throw new Error("状态API调用失败，使用配置数据显示状态")}throw new Error(a?.msg||"获取状态失败，请检查网络连接")}Te.enabled=Boolean(a.data.enabled),Te.has_client=Boolean(a.data.has_client),Te.running=Boolean(a.data.running);try{const e=await xe.api.get(`plugin/${l}/get_config`);e&&(Object.assign(xe.initialConfig,e),console.log("已获取最新配置:",xe.initialConfig))}catch(e){console.error("获取配置失败:",e)}ze.value=!0}catch(l){l.message.includes("使用配置数据显示状态")||(Ve.value=`获取状态失败: ${l.message||"未知错误"}`),console.error("获取状态失败:",l)}finally{ke.value=!1}},Ne=async()=>{Ce.value=!0,await He(),Te.has_client&&xe.initialConfig?.cookies?await nl():(Ue.loading=!1,Ie.loading=!1,xe.initialConfig?.cookies?Te.has_client||(Ue.error="115客户端未连接或Cookie无效。",Ie.error="115客户端未连接或Cookie无效。"):(Ue.error="请先配置115 Cookie。",Ie.error="请先配置115 Cookie。")),Ce.value=!1,$e.value="状态已刷新",Ee.value="success",setTimeout(()=>{$e.value=null},3e3)},Ae=async()=>{we.value=!0,Le.value=!0,Ve.value=null,$e.value=null;try{if(!Te.enabled)throw new Error("插件未启用，请先在配置页面启用插件");if(!Te.has_client)throw new Error("插件未配置Cookie或Cookie无效，请先在配置页面设置115 Cookie");if(0===Se(xe.initialConfig?.full_sync_strm_paths))throw new Error("未配置全量同步路径，请先在配置页面设置同步路径");const e="P115StrmHelper",l=await xe.api.post(`plugin/${e}/full_sync`);if(!l||0!==l.code)throw new Error(l?.msg||"启动全量同步失败");$e.value=l.msg||"全量同步任务已启动",Ee.value="success",await He()}catch(e){Ve.value=`启动全量同步失败: ${e.message||"未知错误"}`,console.error("启动全量同步失败:",e)}finally{we.value=!1,Le.value=!1}},Re=ge({show:!1,error:null,shareLink:"",shareCode:"",receiveCode:"",panPath:"/",localPath:"",downloadMediaInfo:!1}),We=ye(()=>!!Re.localPath&&(!(!Re.shareLink&&!Re.shareCode)&&!(Re.shareCode&&!Re.receiveCode))),Fe=ge({show:!1,isLocal:!0,loading:!1,error:null,currentPath:"/",items:[],selectedPath:"",callback:null}),Ke=()=>{Re.show=!0,Re.error=null,xe.initialConfig&&(Re.shareLink=xe.initialConfig.user_share_link||"",Re.shareCode=xe.initialConfig.user_share_code||"",Re.receiveCode=xe.initialConfig.user_receive_code||"",Re.panPath=xe.initialConfig.user_share_pan_path||"/",Re.localPath=xe.initialConfig.user_share_local_path||"",Re.downloadMediaInfo=xe.initialConfig.share_strm_auto_download_mediainfo_enabled||!1)},qe=()=>{Re.show=!1},De=async()=>{Fe.loading=!0,Fe.error=null,Fe.items=[];try{if(Fe.isLocal)try{const e=await xe.api.post("storage/list",{path:Fe.currentPath||"/",type:"share",flag:"ROOT"});if(!e||!Array.isArray(e))throw new Error("浏览目录失败：无效响应");Fe.items=e.filter(e=>"dir"===e.type).map(e=>({name:e.name,path:e.path,is_dir:!0})).sort((e,l)=>e.name.localeCompare(l.name,void 0,{numeric:!0,sensitivity:"base"}))}catch(Ve){console.error("浏览本地目录失败:",Ve),Fe.error=`浏览本地目录失败: ${Ve.message||"未知错误"}`,Fe.items=[]}else{const e="P115StrmHelper";if(!xe.initialConfig?.cookies||""===xe.initialConfig?.cookies.trim())throw new Error("请先设置115 Cookie才能浏览网盘目录");const l=await xe.api.get(`plugin/${e}/browse_dir?path=${encodeURIComponent(Fe.currentPath)}&is_local=${Fe.isLocal}`);if(!l||0!==l.code||!l.items)throw new Error(l?.msg||"获取网盘目录内容失败");Fe.items=l.items.filter(e=>e.is_dir),Fe.currentPath=l.path||Fe.currentPath}}catch(Ve){console.error("加载目录内容失败:",Ve),Fe.error=Ve.message||"获取目录内容失败",(Ve.message.includes("Cookie")||Ve.message.includes("cookie"))&&(Fe.items=[])}finally{Fe.loading=!1}},Ge=()=>{const e=Fe.currentPath;if(!Fe.isLocal){if("/"===e)return;let l=e.replace(/\\/g,"/");l.length>1&&l.endsWith("/")&&(l=l.slice(0,-1));const a=l.substring(0,l.lastIndexOf("/"));return Fe.currentPath=""===a?"/":a,void De()}if("/"===e||"C:\\"===e||"C:/"===e)return;const l=e.replace(/\\/g,"/"),a=l.split("/").filter(Boolean);0===a.length?Fe.currentPath="/":1===a.length&&l.includes(":")?Fe.currentPath=a[0]+":/":(a.pop(),Fe.currentPath=0===a.length?"/":(l.startsWith("/")?"/":"")+a.join("/")+"/"),De()},Ze=()=>{if(!Fe.currentPath)return;let e=Fe.currentPath;"/"===e||/^[a-zA-Z]:[\\\/]$/.test(e)||!e.endsWith("/")&&!e.endsWith("\\\\")||(e=e.slice(0,-1)),"function"==typeof Fe.callback&&Fe.callback(e),Je()},Je=()=>{Fe.show=!1,Fe.items=[],Fe.error=null},Qe=async()=>{Pe.value=!0,Re.error=null;try{if(!Re.localPath)throw new Error("请先设置本地生成STRM路径");if(!Re.shareLink&&!Re.shareCode)throw new Error("请输入115网盘分享链接或分享码");if(Re.shareCode&&!Re.receiveCode)throw new Error("使用分享码时必须输入分享密码");const e="P115StrmHelper";xe.initialConfig&&(xe.initialConfig.user_share_link=Re.shareLink,xe.initialConfig.user_share_code=Re.shareCode,xe.initialConfig.user_receive_code=Re.receiveCode,xe.initialConfig.user_share_pan_path=Re.panPath,xe.initialConfig.user_share_local_path=Re.localPath,xe.initialConfig.share_strm_auto_download_mediainfo_enabled=Re.downloadMediaInfo,await xe.api.post(`plugin/${e}/save_config`,xe.initialConfig));const l=await xe.api.post(`plugin/${e}/share_sync`);if(!l||0!==l.code)throw new Error(l?.msg||"启动分享同步失败");$e.value=l.msg||"分享同步任务已启动",Ee.value="success",await He(),qe()}catch(e){Re.error=`启动分享同步失败: ${e.message||"未知错误"}`,console.error("启动分享同步失败:",e)}finally{Pe.value=!1}},Xe=()=>{Me.show=!0,Me.activeTab="tasks",Me.error=null,Me.addError=null},Ye=()=>{Me.show=!1,Me.tasks=[],Me.totalTasks=0,Me.links="",Me.destPath=""},el=async({page:e,itemsPerPage:l})=>{Me.loading=!0,Me.error=null;try{const a="P115StrmHelper",t=await xe.api.post(`plugin/${a}/offline_tasks`,{page:e,limit:l});if(!t||0!==t.code||!t.data)throw new Error(t?.msg||"获取离线任务列表失败");Me.tasks=t.data.tasks||[],Me.totalTasks=t.data.total||0}catch(a){Me.error=`获取任务失败: ${a.message||"未知错误"}`,console.error("获取离线任务失败:",a),Me.tasks=[],Me.totalTasks=0}finally{Me.loading=!1}},ll=async()=>{if(Me.links.trim()){Me.adding=!0,Me.addError=null;try{const e="P115StrmHelper",l=Me.links.split("\n").map(e=>e.trim()).filter(Boolean),a=await xe.api.post(`plugin/${e}/add_offline_task`,{links:l,path:Me.destPath||null});if(!a||0!==a.code)throw new Error(a?.msg||"添加离线任务失败");$e.value=a.msg||"离线任务添加成功",Ee.value="success",Me.links="",Me.destPath="",Me.activeTab="tasks",el({page:1,itemsPerPage:Me.itemsPerPage})}catch(e){Me.addError=`添加任务失败: ${e.message||"未知错误"}`,console.error("添加离线任务失败:",e)}finally{Me.adding=!1}}else Me.addError="下载链接不能为空。"},al=()=>{Fe.show=!0,Fe.isLocal=!1,Fe.loading=!1,Fe.error=null,Fe.items=[],Fe.currentPath=Me.destPath||"/",Fe.callback=e=>{Me.destPath=e},De()},tl=e=>{switch(e){case 0:return"info";case 1:return"error";case 2:return"success";case 3:return"warning";default:return"grey"}},il=e=>{if(!e)return[];try{return e.split("\n").filter(e=>e.trim()&&e.includes("#")).map(e=>{const l=e.split("#");return{local:l[0]||"",remote:l[1]||""}})}catch(l){return console.error("解析路径字符串失败:",l),[]}},sl=e=>{if(!e)return[];try{return e.split("\n").filter(e=>e.trim()).map(e=>({path:e}))}catch(l){return console.error("解析网盘整理路径字符串失败:",l),[]}};async function nl(){Ue.loading=!0,Ue.error=null,Ie.loading=!0,Ie.error=null;try{const e="P115StrmHelper",l=await xe.api.get(`plugin/${e}/user_storage_status`);if(l&&l.success)l.user_info?Object.assign(Ue,l.user_info):Ue.error="未能获取有效的用户信息。",l.storage_info?Object.assign(Ie,l.storage_info):Ie.error="未能获取有效的存储空间信息。";else{const e=l?.error_message||"获取用户和存储信息失败。";Ue.error=e,Ie.error=e,(e.includes("Cookie")||e.includes("未配置"))&&(Te.has_client=!1)}}catch(e){console.error("获取用户/存储状态失败:",e);const l=`请求用户/存储状态时出错: ${e.message||"未知网络错误"}`;Ue.error=l,Ie.error=l}finally{Ue.loading=!1,Ie.loading=!1}}return be(()=>xe.initialConfig,e=>{e&&(Te.enabled=e.enabled||!1,Te.has_client=Boolean(e.cookies&&""!==e.cookies.trim()))},{immediate:!0}),he(async()=>{await He(),Te.has_client&&xe.initialConfig?.cookies?await nl():(Ue.loading=!1,Ie.loading=!1,xe.initialConfig?.cookies?Te.has_client||(Ue.error="115客户端未连接或Cookie无效。",Ie.error="115客户端未连接或Cookie无效。"):(Ue.error="请先配置115 Cookie。",Ie.error="请先配置115 Cookie。"))}),(l,_e)=>{const ge=a("v-icon"),ye=a("v-card-title"),he=a("v-alert"),be=a("v-skeleton-loader"),xe=a("v-list-item-title"),He=a("v-chip"),nl=a("v-list-item"),ol=a("v-divider"),rl=a("v-list"),cl=a("v-card-text"),dl=a("v-card"),ml=a("v-img"),ul=a("v-avatar"),pl=a("v-list-item-subtitle"),fl=a("v-progress-linear"),_l=a("v-col"),gl=a("v-row"),yl=a("v-btn"),hl=a("v-card-actions"),bl=a("v-text-field"),xl=a("v-switch"),vl=a("v-spacer"),kl=a("v-dialog"),Cl=a("v-tab"),wl=a("v-tabs"),Pl=a("v-data-table-server"),zl=a("v-window-item"),Vl=a("v-textarea"),$l=a("v-window"),El=a("v-progress-circular");return r(),m(p,null,[i("div",g,[t(dl,{flat:"",class:"rounded border",style:{display:"flex","flex-direction":"column","max-height":"85vh"}},{default:s(()=>[t(ye,{class:"text-subtitle-1 d-flex align-center px-3 py-1 bg-primary-gradient"},{default:s(()=>[t(ge,{icon:"mdi-file-link",class:"mr-2",color:"primary",size:"small"}),_e[19]||(_e[19]=i("span",null,"115网盘STRM助手",-1))]),_:1}),t(cl,{class:"px-3 py-1",style:{"flex-grow":"1","overflow-y":"auto","padding-bottom":"48px"}},{default:s(()=>[Ve.value?(r(),c(he,{key:0,type:"error",density:"compact",class:"mb-2",variant:"tonal",closable:""},{default:s(()=>[o(n(Ve.value),1)]),_:1})):d("",!0),$e.value?(r(),c(he,{key:1,type:Ee.value,density:"compact",class:"mb-2",variant:"tonal",closable:""},{default:s(()=>[o(n($e.value),1)]),_:1},8,["type"])):d("",!0),ke.value&&!ze.value?(r(),c(be,{key:2,type:"article, actions"})):d("",!0),ze.value?(r(),m("div",y,[t(gl,null,{default:s(()=>[t(_l,{cols:"12",md:"6"},{default:s(()=>[t(dl,{flat:"",class:"rounded mb-3 border config-card"},{default:s(()=>[t(ye,{class:"text-subtitle-2 d-flex align-center px-3 py-1 bg-primary-gradient"},{default:s(()=>[t(ge,{icon:"mdi-information",class:"mr-2",color:"primary",size:"small"}),_e[20]||(_e[20]=i("span",null,"系统状态",-1))]),_:1}),t(cl,{class:"pa-0"},{default:s(()=>[t(rl,{class:"bg-transparent pa-0"},{default:s(()=>[t(nl,{class:"px-3 py-0",style:{"min-height":"34px"}},{prepend:s(()=>[t(ge,{color:Te.enabled?"success":"grey",icon:"mdi-power",size:"small"},null,8,["color"])]),append:s(()=>[t(He,{color:Te.enabled?"success":"grey",size:"x-small",variant:"tonal"},{default:s(()=>[o(n(Te.enabled?"已启用":"已禁用"),1)]),_:1},8,["color"])]),default:s(()=>[t(xe,{class:"text-body-2"},{default:s(()=>_e[21]||(_e[21]=[o("插件状态")])),_:1})]),_:1}),t(ol,{class:"my-0"}),t(nl,{class:"px-3 py-0",style:{"min-height":"34px"}},{prepend:s(()=>[t(ge,{color:Te.has_client&&e.initialConfig?.cookies?"success":"error",icon:"mdi-account-check",size:"small"},null,8,["color"])]),append:s(()=>[t(He,{color:Te.has_client&&e.initialConfig?.cookies?"success":"error",size:"x-small",variant:"tonal"},{default:s(()=>[o(n(Te.has_client&&e.initialConfig?.cookies?"已连接":"未连接"),1)]),_:1},8,["color"])]),default:s(()=>[t(xe,{class:"text-body-2"},{default:s(()=>_e[22]||(_e[22]=[o("115客户端状态")])),_:1})]),_:1}),t(ol,{class:"my-0"}),t(nl,{class:"px-3 py-0",style:{"min-height":"34px"}},{prepend:s(()=>[t(ge,{color:Te.running?"warning":"success",icon:"mdi-play-circle",size:"small"},null,8,["color"])]),append:s(()=>[t(He,{color:Te.running?"warning":"success",size:"x-small",variant:"tonal"},{default:s(()=>[o(n(Te.running?"运行中":"空闲"),1)]),_:1},8,["color"])]),default:s(()=>[t(xe,{class:"text-body-2"},{default:s(()=>_e[23]||(_e[23]=[o("任务状态")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(dl,{flat:"",class:"rounded mb-3 border config-card"},{default:s(()=>[t(ye,{class:"text-subtitle-2 d-flex align-center px-3 py-1 bg-primary-gradient"},{default:s(()=>[t(ge,{icon:"mdi-account-box",class:"mr-2",color:"primary",size:"small"}),_e[24]||(_e[24]=i("span",null,"115账户信息",-1))]),_:1}),t(cl,{class:"pa-0"},{default:s(()=>[Ue.loading||Ie.loading?(r(),c(be,{key:0,type:"list-item-avatar-three-line, list-item-three-line"})):(r(),m("div",h,[Ue.error||Ie.error?(r(),c(he,{key:0,type:"warning",density:"compact",class:"ma-2",variant:"tonal"},{default:s(()=>[o(n(Ue.error||Ie.error),1)]),_:1})):(r(),c(rl,{key:1,class:"bg-transparent pa-0"},{default:s(()=>[t(nl,{class:"px-3 py-1"},{prepend:s(()=>[t(ul,{size:"32",class:"mr-2"},{default:s(()=>[Ue.avatar?(r(),c(ml,{key:0,src:Ue.avatar,alt:Ue.name},null,8,["src","alt"])):(r(),c(ge,{key:1,icon:"mdi-account-circle"}))]),_:1})]),default:s(()=>[t(xe,{class:"text-body-1 font-weight-medium"},{default:s(()=>[o(n(Ue.name||"未知用户"),1)]),_:1})]),_:1}),t(ol,{class:"my-0"}),t(nl,{class:"px-3 py-1"},{prepend:s(()=>[t(ge,{color:Ue.is_vip?"amber-darken-2":"grey",icon:"mdi-shield-crown",size:"small"},null,8,["color"])]),append:s(()=>[t(He,{color:Ue.is_vip?"success":"grey",size:"x-small",variant:"tonal"},{default:s(()=>[o(n(Ue.is_vip?Ue.is_forever_vip?"永久VIP":`VIP (至 ${Ue.vip_expire_date||"N/A"})`:"非VIP"),1)]),_:1},8,["color"])]),default:s(()=>[t(xe,{class:"text-body-2"},{default:s(()=>_e[25]||(_e[25]=[o("VIP状态")])),_:1})]),_:1}),t(ol,{class:"my-0"}),t(nl,{class:"px-3 py-1"},{default:s(()=>[t(xe,{class:"text-body-2 mb-1"},{default:s(()=>_e[26]||(_e[26]=[o("存储空间")])),_:1}),Ie.used&&Ie.total?(r(),c(pl,{key:0,class:"text-caption"},{default:s(()=>[o(" 已用 "+n(Ie.used)+" / 总共 "+n(Ie.total)+" (剩余 "+n(Ie.remaining)+") ",1)]),_:1})):d("",!0),Ie.used&&Ie.total?(r(),c(fl,{key:1,"model-value":je(Ie.used,Ie.total),color:"primary",height:"6",rounded:"",class:"mt-1"},null,8,["model-value"])):(r(),c(pl,{key:2,class:"text-caption text-grey"},{default:s(()=>_e[27]||(_e[27]=[o(" 存储信息不可用 ")])),_:1}))]),_:1})]),_:1}))]))]),_:1})]),_:1}),t(dl,{flat:"",class:"rounded mb-3 border config-card"},{default:s(()=>[t(ye,{class:"text-subtitle-2 d-flex align-center px-3 py-1 bg-primary-gradient"},{default:s(()=>[t(ge,{icon:"mdi-puzzle",class:"mr-2",color:"primary",size:"small"}),_e[28]||(_e[28]=i("span",null,"功能配置",-1))]),_:1}),t(cl,{class:"pa-0"},{default:s(()=>[t(rl,{class:"bg-transparent pa-0"},{default:s(()=>[t(nl,{class:"px-3 py-0",style:{"min-height":"34px"}},{prepend:s(()=>[t(ge,{color:e.initialConfig?.transfer_monitor_enabled?"success":"grey",icon:"mdi-file-move",size:"small"},null,8,["color"])]),append:s(()=>[t(He,{color:e.initialConfig?.transfer_monitor_enabled?"success":"grey",size:"x-small",variant:"tonal"},{default:s(()=>[o(n(e.initialConfig?.transfer_monitor_enabled?"已启用":"已禁用"),1)]),_:1},8,["color"])]),default:s(()=>[t(xe,{class:"text-body-2"},{default:s(()=>_e[29]||(_e[29]=[o("监控MP整理")])),_:1})]),_:1}),t(ol,{class:"my-0"}),t(nl,{class:"px-3 py-0",style:{"min-height":"34px"}},{prepend:s(()=>[t(ge,{color:e.initialConfig?.timing_full_sync_strm?"success":"grey",icon:"mdi-sync",size:"small"},null,8,["color"])]),append:s(()=>[t(He,{color:e.initialConfig?.timing_full_sync_strm?"success":"grey",size:"x-small",variant:"tonal"},{default:s(()=>[o(n(e.initialConfig?.timing_full_sync_strm?"已启用":"已禁用"),1)]),_:1},8,["color"])]),default:s(()=>[t(xe,{class:"text-body-2"},{default:s(()=>_e[30]||(_e[30]=[o("定期全量同步")])),_:1})]),_:1}),t(ol,{class:"my-0"}),t(nl,{class:"px-3 py-0",style:{"min-height":"34px"}},{prepend:s(()=>[t(ge,{color:e.initialConfig?.increment_sync_strm_enabled?"success":"grey",icon:"mdi-book-sync",size:"small"},null,8,["color"])]),append:s(()=>[t(He,{color:e.initialConfig?.increment_sync_strm_enabled?"success":"grey",size:"x-small",variant:"tonal"},{default:s(()=>[o(n(e.initialConfig?.increment_sync_strm_enabled?"已启用":"已禁用"),1)]),_:1},8,["color"])]),default:s(()=>[t(xe,{class:"text-body-2"},{default:s(()=>_e[31]||(_e[31]=[o("定期增量同步")])),_:1})]),_:1}),t(ol,{class:"my-0"}),t(nl,{class:"px-3 py-0",style:{"min-height":"34px"}},{prepend:s(()=>[t(ge,{color:e.initialConfig?.monitor_life_enabled?"success":"grey",icon:"mdi-calendar-heart",size:"small"},null,8,["color"])]),append:s(()=>[t(He,{color:e.initialConfig?.monitor_life_enabled?"success":"grey",size:"x-small",variant:"tonal"},{default:s(()=>[o(n(e.initialConfig?.monitor_life_enabled?"已启用":"已禁用"),1)]),_:1},8,["color"])]),default:s(()=>[t(xe,{class:"text-body-2"},{default:s(()=>_e[32]||(_e[32]=[o("监控115生活事件")])),_:1})]),_:1}),t(ol,{class:"my-0"}),t(nl,{class:"px-3 py-0",style:{"min-height":"34px"}},{prepend:s(()=>[t(ge,{color:e.initialConfig?.pan_transfer_enabled?"success":"grey",icon:"mdi-transfer",size:"small"},null,8,["color"])]),append:s(()=>[t(He,{color:e.initialConfig?.pan_transfer_enabled?"success":"grey",size:"x-small",variant:"tonal"},{default:s(()=>[o(n(e.initialConfig?.pan_transfer_enabled?"已启用":"已禁用"),1)]),_:1},8,["color"])]),default:s(()=>[t(xe,{class:"text-body-2"},{default:s(()=>_e[33]||(_e[33]=[o("网盘整理")])),_:1})]),_:1}),t(ol,{class:"my-0"}),t(nl,{class:"px-3 py-0",style:{"min-height":"34px"}},{prepend:s(()=>[t(ge,{color:e.initialConfig?.clear_recyclebin_enabled||e.initialConfig?.clear_receive_path_enabled?"success":"grey",icon:"mdi-broom",size:"small"},null,8,["color"])]),append:s(()=>[t(He,{color:e.initialConfig?.clear_recyclebin_enabled||e.initialConfig?.clear_receive_path_enabled?"success":"grey",size:"x-small",variant:"tonal"},{default:s(()=>[o(n(e.initialConfig?.clear_recyclebin_enabled||e.initialConfig?.clear_receive_path_enabled?"已启用":"已禁用"),1)]),_:1},8,["color"])]),default:s(()=>[t(xe,{class:"text-body-2"},{default:s(()=>_e[34]||(_e[34]=[o("定期清理")])),_:1})]),_:1}),t(ol,{class:"my-0"})]),_:1})]),_:1})]),_:1})]),_:1}),t(_l,{cols:"12",md:"6"},{default:s(()=>[t(dl,{flat:"",class:"rounded mb-3 border config-card"},{default:s(()=>[t(ye,{class:"text-subtitle-2 d-flex align-center px-3 py-1 bg-primary-gradient"},{default:s(()=>[t(ge,{icon:"mdi-folder-search",class:"mr-2",color:"primary",size:"small"}),_e[35]||(_e[35]=i("span",null,"路径配置",-1))]),_:1}),t(cl,{class:"pa-0"},{default:s(()=>[t(rl,{class:"bg-transparent pa-0"},{default:s(()=>[e.initialConfig?.transfer_monitor_enabled?(r(),c(nl,{key:0,class:"px-3 py-2"},{default:s(()=>[i("div",null,[_e[41]||(_e[41]=i("div",{class:"text-body-2 font-weight-medium mb-1"},"监控MP整理路径",-1)),Se(e.initialConfig?.transfer_monitor_paths)>0?(r(!0),m(p,{key:0},u(il(e.initialConfig?.transfer_monitor_paths),(e,l)=>(r(),m(p,{key:`transfer-${l}`},[l>0?(r(),c(ol,{key:0,class:"my-1"})):d("",!0),i("div",b,[t(gl,{dense:"",align:"center"},{default:s(()=>[t(_l,{cols:"12",sm:"5",class:"d-flex align-center"},{default:s(()=>[t(ge,{size:"small",color:"primary",class:"mr-2 flex-shrink-0"},{default:s(()=>_e[36]||(_e[36]=[o("mdi-folder-home")])),_:1}),i("div",{class:"text-truncate w-100",title:e.local},[_e[37]||(_e[37]=i("span",{class:"text-caption font-weight-medium d-block",style:{"line-height":"1.2"}},"本地目录",-1)),i("span",v,n(e.local||"-"),1)],8,x)]),_:2},1024),t(_l,{cols:"12",sm:"2",class:"text-center my-1 my-sm-0"},{default:s(()=>[t(ge,{color:"primary",class:"icon-spin-animation"},{default:s(()=>_e[38]||(_e[38]=[o("mdi-sync")])),_:1})]),_:1}),t(_l,{cols:"12",sm:"5",class:"d-flex align-center"},{default:s(()=>[t(ge,{size:"small",color:"success",class:"mr-2 flex-shrink-0"},{default:s(()=>_e[39]||(_e[39]=[o("mdi-cloud")])),_:1}),i("div",{class:"text-truncate w-100",title:e.remote},[_e[40]||(_e[40]=i("span",{class:"text-caption font-weight-medium d-block",style:{"line-height":"1.2"}},"网盘目录",-1)),i("span",C,n(e.remote||"-"),1)],8,k)]),_:2},1024)]),_:2},1024)])],64))),128)):(r(),m("div",w,"未配置路径"))])]),_:1})):d("",!0),e.initialConfig?.transfer_monitor_enabled&&(e.initialConfig?.increment_sync_strm_enabled||e.initialConfig?.timing_full_sync_strm||e.initialConfig?.monitor_life_enabled||e.initialConfig?.pan_transfer_enabled||e.initialConfig?.directory_upload_enabled)?(r(),c(ol,{key:1,class:"my-0"})):d("",!0),e.initialConfig?.timing_full_sync_strm?(r(),c(nl,{key:2,class:"px-3 py-2"},{default:s(()=>[i("div",null,[_e[47]||(_e[47]=i("div",{class:"text-body-2 font-weight-medium mb-1"},"全量同步路径",-1)),Se(e.initialConfig?.full_sync_strm_paths)>0?(r(!0),m(p,{key:0},u(il(e.initialConfig?.full_sync_strm_paths),(e,l)=>(r(),m(p,{key:`fullsync-${l}`},[l>0?(r(),c(ol,{key:0,class:"my-1"})):d("",!0),i("div",P,[t(gl,{dense:"",align:"center"},{default:s(()=>[t(_l,{cols:"12",sm:"5",class:"d-flex align-center"},{default:s(()=>[t(ge,{size:"small",color:"primary",class:"mr-2 flex-shrink-0"},{default:s(()=>_e[42]||(_e[42]=[o("mdi-folder-home")])),_:1}),i("div",{class:"text-truncate w-100",title:e.local},[_e[43]||(_e[43]=i("span",{class:"text-caption font-weight-medium d-block",style:{"line-height":"1.2"}},"本地目录",-1)),i("span",V,n(e.local||"-"),1)],8,z)]),_:2},1024),t(_l,{cols:"12",sm:"2",class:"text-center my-1 my-sm-0"},{default:s(()=>[t(ge,{color:"primary",class:"icon-spin-animation"},{default:s(()=>_e[44]||(_e[44]=[o("mdi-sync")])),_:1})]),_:1}),t(_l,{cols:"12",sm:"5",class:"d-flex align-center"},{default:s(()=>[t(ge,{size:"small",color:"success",class:"mr-2 flex-shrink-0"},{default:s(()=>_e[45]||(_e[45]=[o("mdi-cloud")])),_:1}),i("div",{class:"text-truncate w-100",title:e.remote},[_e[46]||(_e[46]=i("span",{class:"text-caption font-weight-medium d-block",style:{"line-height":"1.2"}},"网盘目录",-1)),i("span",E,n(e.remote||"-"),1)],8,$)]),_:2},1024)]),_:2},1024)])],64))),128)):(r(),m("div",L,"未配置路径"))])]),_:1})):d("",!0),e.initialConfig?.timing_full_sync_strm&&(e.initialConfig?.increment_sync_strm_enabled||e.initialConfig?.monitor_life_enabled||e.initialConfig?.pan_transfer_enabled||e.initialConfig?.directory_upload_enabled)?(r(),c(ol,{key:3,class:"my-0"})):d("",!0),e.initialConfig?.increment_sync_strm_enabled?(r(),c(nl,{key:4,class:"px-3 py-2"},{default:s(()=>[i("div",null,[_e[53]||(_e[53]=i("div",{class:"text-body-2 font-weight-medium mb-1"},"增量同步路径",-1)),Se(e.initialConfig?.increment_sync_strm_paths)>0?(r(!0),m(p,{key:0},u(il(e.initialConfig?.increment_sync_strm_paths),(e,l)=>(r(),m(p,{key:`incsync-${l}`},[l>0?(r(),c(ol,{key:0,class:"my-1"})):d("",!0),i("div",T,[t(gl,{dense:"",align:"center"},{default:s(()=>[t(_l,{cols:"12",sm:"5",class:"d-flex align-center"},{default:s(()=>[t(ge,{size:"small",color:"primary",class:"mr-2 flex-shrink-0"},{default:s(()=>_e[48]||(_e[48]=[o("mdi-folder-home")])),_:1}),i("div",{class:"text-truncate w-100",title:e.local},[_e[49]||(_e[49]=i("span",{class:"text-caption font-weight-medium d-block",style:{"line-height":"1.2"}},"本地目录",-1)),i("span",I,n(e.local||"-"),1)],8,U)]),_:2},1024),t(_l,{cols:"12",sm:"2",class:"text-center my-1 my-sm-0"},{default:s(()=>[t(ge,{color:"primary",class:"icon-spin-animation"},{default:s(()=>_e[50]||(_e[50]=[o("mdi-sync")])),_:1})]),_:1}),t(_l,{cols:"12",sm:"5",class:"d-flex align-center"},{default:s(()=>[t(ge,{size:"small",color:"success",class:"mr-2 flex-shrink-0"},{default:s(()=>_e[51]||(_e[51]=[o("mdi-cloud")])),_:1}),i("div",{class:"text-truncate w-100",title:e.remote},[_e[52]||(_e[52]=i("span",{class:"text-caption font-weight-medium d-block",style:{"line-height":"1.2"}},"网盘目录",-1)),i("span",j,n(e.remote||"-"),1)],8,M)]),_:2},1024)]),_:2},1024)])],64))),128)):(r(),m("div",B,"未配置路径"))])]),_:1})):d("",!0),e.initialConfig?.increment_sync_strm_enabled&&(e.initialConfig?.monitor_life_enabled||e.initialConfig?.pan_transfer_enabled||e.initialConfig?.directory_upload_enabled)?(r(),c(ol,{key:5,class:"my-0"})):d("",!0),e.initialConfig?.monitor_life_enabled?(r(),c(nl,{key:6,class:"px-3 py-2"},{default:s(()=>[i("div",null,[_e[59]||(_e[59]=i("div",{class:"text-body-2 font-weight-medium mb-1"},"监控115生活事件路径",-1)),Se(e.initialConfig?.monitor_life_paths)>0?(r(!0),m(p,{key:0},u(il(e.initialConfig?.monitor_life_paths),(e,l)=>(r(),m(p,{key:`life-${l}`},[l>0?(r(),c(ol,{key:0,class:"my-1"})):d("",!0),i("div",S,[t(gl,{dense:"",align:"center"},{default:s(()=>[t(_l,{cols:"12",sm:"5",class:"d-flex align-center"},{default:s(()=>[t(ge,{size:"small",color:"primary",class:"mr-2 flex-shrink-0"},{default:s(()=>_e[54]||(_e[54]=[o("mdi-folder-home")])),_:1}),i("div",{class:"text-truncate w-100",title:e.local},[_e[55]||(_e[55]=i("span",{class:"text-caption font-weight-medium d-block",style:{"line-height":"1.2"}},"本地目录",-1)),i("span",H,n(e.local||"-"),1)],8,O)]),_:2},1024),t(_l,{cols:"12",sm:"2",class:"text-center my-1 my-sm-0"},{default:s(()=>[t(ge,{color:"primary",class:"icon-spin-animation"},{default:s(()=>_e[56]||(_e[56]=[o("mdi-sync")])),_:1})]),_:1}),t(_l,{cols:"12",sm:"5",class:"d-flex align-center"},{default:s(()=>[t(ge,{size:"small",color:"success",class:"mr-2 flex-shrink-0"},{default:s(()=>_e[57]||(_e[57]=[o("mdi-cloud")])),_:1}),i("div",{class:"text-truncate w-100",title:e.remote},[_e[58]||(_e[58]=i("span",{class:"text-caption font-weight-medium d-block",style:{"line-height":"1.2"}},"网盘目录",-1)),i("span",A,n(e.remote||"-"),1)],8,N)]),_:2},1024)]),_:2},1024)])],64))),128)):(r(),m("div",R,"未配置路径"))])]),_:1})):d("",!0),e.initialConfig?.monitor_life_enabled&&(e.initialConfig?.pan_transfer_enabled||e.initialConfig?.directory_upload_enabled)?(r(),c(ol,{key:7,class:"my-0"})):d("",!0),e.initialConfig?.pan_transfer_enabled?(r(),c(nl,{key:8,class:"px-3 py-2"},{default:s(()=>[i("div",null,[_e[62]||(_e[62]=i("div",{class:"text-body-2 font-weight-medium mb-1"},"网盘整理目录",-1)),Oe(e.initialConfig?.pan_transfer_paths)>0?(r(!0),m(p,{key:0},u(sl(e.initialConfig?.pan_transfer_paths),(e,l)=>(r(),m(p,{key:`pan-${l}`},[l>0?(r(),c(ol,{key:0,class:"my-1"})):d("",!0),i("div",W,[i("div",F,[t(ge,{size:"small",color:"success",class:"mr-2 flex-shrink-0"},{default:s(()=>_e[60]||(_e[60]=[o("mdi-folder-arrow-down")])),_:1}),i("div",{class:"text-truncate w-100",title:e.path},[_e[61]||(_e[61]=i("span",{class:"text-caption font-weight-medium d-block",style:{"line-height":"1.2"}},"待整理网盘目录",-1)),i("span",q,n(e.path),1)],8,K)])])],64))),128)):(r(),m("div",D,"未配置网盘整理目录"))])]),_:1})):d("",!0),e.initialConfig?.pan_transfer_enabled&&e.initialConfig?.directory_upload_enabled?(r(),c(ol,{key:9,class:"my-0"})):d("",!0),e.initialConfig?.directory_upload_enabled?(r(),c(nl,{key:10,class:"px-3 py-2"},{default:s(()=>[i("div",null,[_e[70]||(_e[70]=i("div",{class:"text-body-2 font-weight-medium mb-1"},"目录上传路径",-1)),e.initialConfig?.directory_upload_path&&e.initialConfig.directory_upload_path.length>0?(r(!0),m(p,{key:0},u(e.initialConfig.directory_upload_path,(e,l)=>(r(),m(p,{key:`upload-group-${l}`},[l>0?(r(),c(ol,{key:0,class:"my-1"})):d("",!0),i("div",G,[t(gl,{dense:"",align:"center"},{default:s(()=>[t(_l,{cols:"12",md:"5",class:"d-flex align-center"},{default:s(()=>[t(ge,{size:"small",color:"primary",class:"mr-2 flex-shrink-0"},{default:s(()=>_e[63]||(_e[63]=[o("mdi-folder-table")])),_:1}),i("div",{class:"text-truncate w-100",title:e.src},[_e[64]||(_e[64]=i("span",{class:"text-caption font-weight-medium d-block",style:{"line-height":"1.2"}},"本地监控",-1)),i("span",J,n(e.src||"-"),1)],8,Z)]),_:2},1024),t(_l,{cols:"12",md:"2",class:"text-center my-1 my-md-0"},{default:s(()=>[t(ge,{color:"primary",class:"icon-spin-animation"},{default:s(()=>_e[65]||(_e[65]=[o("mdi-sync")])),_:1})]),_:1}),t(_l,{cols:"12",md:"5",class:"d-flex align-center"},{default:s(()=>[t(ge,{size:"small",color:"success",class:"mr-2 flex-shrink-0"},{default:s(()=>_e[66]||(_e[66]=[o("mdi-cloud-upload")])),_:1}),i("div",{class:"text-truncate w-100",title:e.dest_remote},[_e[67]||(_e[67]=i("span",{class:"text-caption font-weight-medium d-block",style:{"line-height":"1.2"}},"网盘上传",-1)),i("span",X,n(e.dest_remote||"-"),1)],8,Q)]),_:2},1024)]),_:2},1024),e.dest_local||"boolean"==typeof e.delete?(r(),m("div",Y,[t(gl,{dense:"",align:"center",class:"mt-1"},{default:s(()=>[t(_l,{cols:"12",md:"boolean"==typeof e.delete?7:12},{default:s(()=>[e.dest_local?(r(),m("div",ee,[t(ge,{size:"small",color:"warning",class:"mr-2 flex-shrink-0"},{default:s(()=>_e[68]||(_e[68]=[o("mdi-content-copy")])),_:1}),i("div",{class:"text-truncate w-100",title:e.dest_local},[_e[69]||(_e[69]=i("span",{class:"text-caption font-weight-medium d-block",style:{"line-height":"1.2"}},"本地复制",-1)),i("span",ae,n(e.dest_local),1)],8,le)])):d("",!0)]),_:2},1032,["md"]),"boolean"==typeof e.delete?(r(),c(_l,{key:0,cols:"12",md:e.dest_local?5:12,class:f(["d-flex align-center",{"justify-md-end":e.dest_local,"mt-1 mt-md-0":e.dest_local}])},{default:s(()=>[t(ge,{size:"small",color:e.delete?"error":"grey-darken-1",class:"mr-1 flex-shrink-0"},{default:s(()=>[o(n(e.delete?"mdi-delete":"mdi-delete-off"),1)]),_:2},1032,["color"]),i("span",{class:f(["text-caption",e.delete?"text-error":"text-grey-darken-1"])},n(e.delete?"删除源":"不删源"),3)]),_:2},1032,["md","class"])):d("",!0)]),_:2},1024)])):d("",!0)])],64))),128)):(r(),m("div",te,"未配置路径"))])]),_:1})):d("",!0)]),_:1})]),_:1})]),_:1}),Te.has_client&&e.initialConfig.cookies?Be.value?d("",!0):(r(),c(dl,{key:1,flat:"",class:"rounded mb-3 border config-card"},{default:s(()=>[t(cl,{class:"pa-3"},{default:s(()=>[i("div",ne,[t(ge,{icon:"mdi-alert-circle",color:"warning",class:"mr-2",size:"small"}),i("div",oe,[_e[77]||(_e[77]=i("p",{class:"mb-1"},[i("strong",null,"路径配置不完整")],-1)),_e[78]||(_e[78]=i("p",{class:"mb-0"},"您已配置115 Cookie，但部分功能路径未配置。请前往配置页面完善路径设置。",-1)),t(yl,{color:"primary",variant:"text",size:"small",class:"mt-1 px-2 py-0",onClick:_e[1]||(_e[1]=e=>ve("switch"))},{default:s(()=>[t(ge,{size:"small",class:"mr-1"},{default:s(()=>_e[75]||(_e[75]=[o("mdi-cog")])),_:1}),_e[76]||(_e[76]=o("前往配置 "))]),_:1})])])]),_:1})]),_:1})):(r(),c(dl,{key:0,flat:"",class:"rounded mb-3 border config-card"},{default:s(()=>[t(cl,{class:"pa-3"},{default:s(()=>[i("div",ie,[t(ge,{icon:"mdi-alert-circle",color:"error",class:"mr-2",size:"small"}),i("div",se,[_e[73]||(_e[73]=i("p",{class:"mb-1"},[i("strong",null,"未配置115 Cookie或Cookie无效")],-1)),_e[74]||(_e[74]=i("p",{class:"mb-0"},"请在配置页面中设置有效的115网盘Cookie，可通过扫码登录获取。",-1)),t(yl,{color:"primary",variant:"text",size:"small",class:"mt-1 px-2 py-0",onClick:_e[0]||(_e[0]=e=>ve("switch"))},{default:s(()=>[t(ge,{size:"small",class:"mr-1"},{default:s(()=>_e[71]||(_e[71]=[o("mdi-cog")])),_:1}),_e[72]||(_e[72]=o("前往配置 "))]),_:1})])])]),_:1})]),_:1}))]),_:1})]),_:1}),t(dl,{flat:"",class:"rounded mb-3 border config-card"},{default:s(()=>[t(cl,{class:"d-flex align-center px-3 py-1"},{default:s(()=>[t(ge,{icon:"mdi-information",color:"info",class:"mr-2",size:"small"}),_e[79]||(_e[79]=i("span",{class:"text-body-2"},' 点击"配置"按钮进行设置，"全量同步"和"分享同步"按钮可立即执行相应任务。 ',-1))]),_:1})]),_:1})])):d("",!0)]),_:1}),t(ol),t(hl,{class:"px-2 py-1 sticky-actions d-flex justify-space-between align-center",style:{"flex-shrink":"0"}},{default:s(()=>[t(yl,{color:"info",onClick:Ne,"prepend-icon":"mdi-refresh",disabled:Ce.value,loading:Ce.value,variant:"text",size:"small"},{default:s(()=>_e[80]||(_e[80]=[o("刷新状态")])),_:1},8,["disabled","loading"]),i("div",re,[t(yl,{color:"warning","prepend-icon":"mdi-sync",disabled:!Te.enabled||!Te.has_client||Le.value,loading:we.value,onClick:Ae,variant:"text",size:"small",class:"ml-1"},{default:s(()=>_e[81]||(_e[81]=[o(" 全量同步 ")])),_:1},8,["disabled","loading"]),t(yl,{color:"info","prepend-icon":"mdi-share-variant",disabled:!Te.enabled||!Te.has_client||Le.value,loading:Pe.value,onClick:Ke,variant:"text",size:"small",class:"ml-1"},{default:s(()=>_e[82]||(_e[82]=[o(" 分享同步 ")])),_:1},8,["disabled","loading"]),t(yl,{color:"secondary","prepend-icon":"mdi-cloud-download-outline",disabled:!Te.enabled||!Te.has_client||Le.value,onClick:Xe,variant:"text",size:"small",class:"ml-1"},{default:s(()=>_e[83]||(_e[83]=[o(" 离线下载 ")])),_:1},8,["disabled"]),t(yl,{color:"primary",onClick:_e[2]||(_e[2]=e=>ve("switch")),"prepend-icon":"mdi-cog",variant:"text",size:"small",class:"ml-1"},{default:s(()=>_e[84]||(_e[84]=[o("配置")])),_:1}),t(yl,{color:"error",onClick:_e[3]||(_e[3]=e=>ve("close")),variant:"flat",size:"small",class:"ml-1 custom-close-btn","aria-label":"关闭",style:{"min-width":"auto !important",padding:"0 10px !important",height:"28px !important","line-height":"28px !important"}},{default:s(()=>[t(ge,{size:"small"},{default:s(()=>_e[85]||(_e[85]=[o("mdi-close")])),_:1})]),_:1})])]),_:1})]),_:1})]),t(kl,{modelValue:Re.show,"onUpdate:modelValue":_e[11]||(_e[11]=e=>Re.show=e),"max-width":"600"},{default:s(()=>[t(dl,null,{default:s(()=>[t(ye,{class:"text-subtitle-1 d-flex align-center px-3 py-1 bg-primary-lighten-5"},{default:s(()=>[t(ge,{icon:"mdi-share-variant",class:"mr-2",color:"primary",size:"small"}),_e[86]||(_e[86]=i("span",null,"115网盘分享同步",-1))]),_:1}),t(cl,{class:"px-3 py-2"},{default:s(()=>[Re.error?(r(),c(he,{key:0,type:"error",density:"compact",class:"mb-3",variant:"tonal"},{default:s(()=>[o(n(Re.error),1)]),_:1})):d("",!0),t(gl,null,{default:s(()=>[t(_l,{cols:"12"},{default:s(()=>[t(bl,{modelValue:Re.shareLink,"onUpdate:modelValue":_e[4]||(_e[4]=e=>Re.shareLink=e),label:"分享链接",hint:"115网盘分享链接","persistent-hint":"",variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),t(gl,null,{default:s(()=>[t(_l,{cols:"12",md:"6"},{default:s(()=>[t(bl,{modelValue:Re.shareCode,"onUpdate:modelValue":_e[5]||(_e[5]=e=>Re.shareCode=e),label:"分享码",hint:"分享码，和分享链接选填一项","persistent-hint":"",variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1}),t(_l,{cols:"12",md:"6"},{default:s(()=>[t(bl,{modelValue:Re.receiveCode,"onUpdate:modelValue":_e[6]||(_e[6]=e=>Re.receiveCode=e),label:"分享密码",hint:"分享密码，如有则必填","persistent-hint":"",variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),t(gl,null,{default:s(()=>[t(_l,{cols:"12",md:"6"},{default:s(()=>[t(bl,{modelValue:Re.panPath,"onUpdate:modelValue":_e[7]||(_e[7]=e=>Re.panPath=e),label:"分享文件夹路径",hint:"分享内容列表中的相对路径，默认为根目录 /。例如，若分享链接指向一个文件夹，此路径为该文件夹内的子路径。","persistent-hint":"",variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1}),t(_l,{cols:"12",md:"6"},{default:s(()=>[t(bl,{modelValue:Re.localPath,"onUpdate:modelValue":_e[8]||(_e[8]=e=>Re.localPath=e),label:"本地生成STRM路径",hint:"本地生成STRM文件的路径","persistent-hint":"",variant:"outlined",density:"compact","append-icon":"mdi-folder","onClick:append":_e[9]||(_e[9]=e=>{return l="local",Fe.show=!0,Fe.isLocal="local"===l,Fe.loading=!1,Fe.error=null,Fe.items=[],Fe.isLocal?Fe.currentPath=Re.localPath||"/":Fe.currentPath=Re.panPath||"/",Fe.callback=e=>{Fe.isLocal?Re.localPath=e:Re.panPath=e},void De();var l})},null,8,["modelValue"])]),_:1})]),_:1}),t(gl,null,{default:s(()=>[t(_l,{cols:"12"},{default:s(()=>[t(xl,{modelValue:Re.downloadMediaInfo,"onUpdate:modelValue":_e[10]||(_e[10]=e=>Re.downloadMediaInfo=e),label:"下载媒体数据文件",color:"primary",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),t(he,{type:"info",variant:"tonal",density:"compact",class:"mt-1"},{default:s(()=>_e[87]||(_e[87]=[o(" 分享链接/分享码和分享密码 只需要二选一配置即可。"),i("br",null,null,-1),o(" 同时填写分享链接，分享码和分享密码时，优先读取分享链接。 ")])),_:1})]),_:1}),t(ol),t(hl,{class:"px-3 py-1"},{default:s(()=>[t(yl,{color:"grey",variant:"text",onClick:qe,size:"small"},{default:s(()=>_e[88]||(_e[88]=[o("取消")])),_:1}),t(vl),t(yl,{color:"primary",variant:"text",onClick:Qe,loading:Pe.value,disabled:!We.value,size:"small"},{default:s(()=>_e[89]||(_e[89]=[o(" 开始同步 ")])),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(kl,{modelValue:Me.show,"onUpdate:modelValue":_e[16]||(_e[16]=e=>Me.show=e),"max-width":"800",persistent:""},{default:s(()=>[t(dl,null,{default:s(()=>[t(ye,{class:"text-subtitle-1 d-flex align-center px-3 py-1 bg-primary-lighten-5"},{default:s(()=>[t(ge,{icon:"mdi-cloud-download-outline",class:"mr-2",color:"primary",size:"small"}),_e[90]||(_e[90]=i("span",null,"115离线下载",-1)),t(vl),t(yl,{icon:"mdi-close",variant:"text",size:"small",onClick:Ye})]),_:1}),t(cl,{class:"pa-0"},{default:s(()=>[t(wl,{modelValue:Me.activeTab,"onUpdate:modelValue":_e[12]||(_e[12]=e=>Me.activeTab=e),"bg-color":"primary-gradient",grow:""},{default:s(()=>[t(Cl,{value:"tasks"},{default:s(()=>_e[91]||(_e[91]=[o("任务列表")])),_:1}),t(Cl,{value:"add"},{default:s(()=>_e[92]||(_e[92]=[o("添加任务")])),_:1})]),_:1},8,["modelValue"]),t($l,{modelValue:Me.activeTab,"onUpdate:modelValue":_e[15]||(_e[15]=e=>Me.activeTab=e)},{default:s(()=>[t(zl,{value:"tasks"},{default:s(()=>[Me.error?(r(),c(he,{key:0,type:"error",density:"compact",class:"ma-3",variant:"tonal"},{default:s(()=>[o(n(Me.error),1)]),_:1})):d("",!0),t(Pl,{headers:Me.headers,items:Me.tasks,"items-length":Me.totalTasks,loading:Me.loading,"items-per-page":Me.itemsPerPage,"onUpdate:options":el,density:"compact",class:"ma-2","no-data-text":"没有离线下载任务","loading-text":"正在加载任务...","items-per-page-text":"每页条目数"},{"item.progress":s(({item:e})=>[i("div",ce,[t(fl,{"model-value":e.percent,color:tl(e.status),stream:0===e.status||3===e.status,striped:0===e.status||3===e.status,height:"8",rounded:"",class:"flex-grow-1 mr-3"},null,8,["model-value","color","stream","striped"]),i("div",de,n(e.percent)+"% ",1)])]),"item.status_text":s(({item:e})=>[t(He,{color:tl(e.status),size:"x-small",variant:"tonal"},{default:s(()=>[o(n(e.status_text),1)]),_:2},1032,["color"])]),_:1},8,["headers","items","items-length","loading","items-per-page"])]),_:1}),t(zl,{value:"add"},{default:s(()=>[i("div",me,[Me.addError?(r(),c(he,{key:0,type:"error",density:"compact",class:"mb-3",variant:"tonal"},{default:s(()=>[o(n(Me.addError),1)]),_:1})):d("",!0),t(Vl,{modelValue:Me.links,"onUpdate:modelValue":_e[13]||(_e[13]=e=>Me.links=e),label:"下载链接",hint:"每行一个链接，支持 http(s)/ftp/magnet/ed2k","persistent-hint":"",variant:"outlined",rows:"5",clearable:""},null,8,["modelValue"]),t(bl,{modelValue:Me.destPath,"onUpdate:modelValue":_e[14]||(_e[14]=e=>Me.destPath=e),label:"网盘保存路径 (可选)",hint:"可选，默认为网盘待整理目录","persistent-hint":"",variant:"outlined",density:"compact",class:"mt-3","append-inner-icon":"mdi-folder-network-outline","onClick:appendInner":al,clearable:""},null,8,["modelValue"]),i("div",ue,[t(yl,{color:"primary",onClick:ll,loading:Me.adding,disabled:!Me.links||Me.adding,"prepend-icon":"mdi-plus"},{default:s(()=>_e[93]||(_e[93]=[o(" 添加任务 ")])),_:1},8,["loading","disabled"])])])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(kl,{modelValue:Fe.show,"onUpdate:modelValue":_e[18]||(_e[18]=e=>Fe.show=e),"max-width":"800"},{default:s(()=>[t(dl,null,{default:s(()=>[t(ye,{class:"text-subtitle-1 d-flex align-center px-3 py-1 bg-primary-lighten-5"},{default:s(()=>[t(ge,{icon:Fe.isLocal?"mdi-folder-search":"mdi-folder-network",class:"mr-2",color:"primary"},null,8,["icon"]),i("span",null,n(Fe.isLocal?"选择本地目录":"选择网盘目录"),1)]),_:1}),t(cl,{class:"px-3 py-2"},{default:s(()=>[Fe.loading?(r(),m("div",pe,[t(El,{indeterminate:"",color:"primary"})])):(r(),m("div",fe,[t(bl,{modelValue:Fe.currentPath,"onUpdate:modelValue":_e[17]||(_e[17]=e=>Fe.currentPath=e),label:"当前路径",variant:"outlined",density:"compact",class:"mb-2",onKeyup:_(De,["enter"])},null,8,["modelValue"]),t(rl,{class:"border rounded","max-height":"300px","overflow-y":"auto"},{default:s(()=>["/"!==Fe.currentPath&&"C:\\"!==Fe.currentPath&&"C:/"!==Fe.currentPath?(r(),c(nl,{key:0,onClick:Ge,class:"py-0",style:{"min-height":"auto"}},{prepend:s(()=>[t(ge,{icon:"mdi-arrow-up",size:"small",class:"mr-2",color:"grey"})]),default:s(()=>[t(xe,{class:"text-body-2"},{default:s(()=>_e[94]||(_e[94]=[o("上级目录")])),_:1}),t(pl,null,{default:s(()=>_e[95]||(_e[95]=[o("..")])),_:1})]),_:1})):d("",!0),(r(!0),m(p,null,u(Fe.items,(e,l)=>(r(),c(nl,{key:l,onClick:l=>(e=>{e&&e.is_dir&&e.path&&(Fe.currentPath=e.path,De())})(e),disabled:!e.is_dir,class:"py-0",style:{"min-height":"auto"}},{prepend:s(()=>[t(ge,{icon:e.is_dir?"mdi-folder":"mdi-file",size:"small",class:"mr-2",color:e.is_dir?"success":"blue"},null,8,["icon","color"])]),default:s(()=>[t(xe,{class:"text-body-2"},{default:s(()=>[o(n(e.name),1)]),_:2},1024)]),_:2},1032,["onClick","disabled"]))),128)),Fe.items.length?d("",!0):(r(),c(nl,{key:1,class:"py-2 text-center"},{default:s(()=>[t(xe,{class:"text-body-2 text-grey"},{default:s(()=>_e[96]||(_e[96]=[o("该目录为空或访问受限")])),_:1})]),_:1}))]),_:1})])),"/"!==Fe.currentPath||Fe.isLocal?d("",!0):(r(),c(he,{key:2,type:"warning",density:"compact",class:"mt-2 text-caption",variant:"tonal",icon:"mdi-alert-circle-outline"},{default:s(()=>_e[97]||(_e[97]=[o(" 115离线下载不支持选择根目录，请选择或进入一个子目录。 ")])),_:1})),Fe.error?(r(),c(he,{key:3,type:"error",density:"compact",class:"mt-2 text-caption",variant:"tonal"},{default:s(()=>[o(n(Fe.error),1)]),_:1})):d("",!0)]),_:1}),t(hl,{class:"px-3 py-1"},{default:s(()=>[t(vl),t(yl,{color:"primary",onClick:Ze,disabled:!Fe.currentPath||Fe.loading||"/"===Fe.currentPath&&!Fe.isLocal,variant:"text",size:"small"},{default:s(()=>_e[98]||(_e[98]=[o(" 选择当前目录 ")])),_:1},8,["disabled"]),t(yl,{color:"grey",onClick:Je,variant:"text",size:"small"},{default:s(()=>_e[99]||(_e[99]=[o(" 取消 ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},[["__scopeId","data-v-68593717"]]);export{xe as default};
